version: '3.3'
services:
 java:
  image: openjdk:8
  depends_on:
   - db
  volumes:
   - ./:/usr/src/myapp
  working_dir: /usr/src/myapp
  command: ["./wait-for-it.sh", "db:3306", "-t", "60", "--", "java", "-jar", "quizsystem-0.0.1-SNAPSHOT.jar"]
  ports:
   - "8080:8081"
  networks:
   - app-network
 db:
  image: mysql:8.0.20
  container_name: db
  restart: unless-stopped
  tty: true
  ports:
    - "3308:3306"
  environment:
    MYSQL_ROOT_PASSWORD: root
  volumes:
    - ./database/:/docker-entrypoint-initdb.d/
  networks:
   - app-network
networks:
  app-network:
    driver: bridge